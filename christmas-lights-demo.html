<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Lights Designer | Visualize Before You Buy</title>
    <meta name="description" content="See Christmas lights on your home before installation. Use Street View to design your holiday display with our AI assistant.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        holiday: {
                            red: '#c41e3a',
                            green: '#165b33',
                            gold: '#ffd700',
                            blue: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .hero-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #165b33 50%, #c41e3a 100%);
        }
        .btn-primary {
            background: linear-gradient(135deg, #c41e3a 0%, #ffd700 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(196, 30, 58, 0.3);
        }
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-height: 500px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .chat-widget.minimized {
            height: 60px;
            max-height: 60px;
        }
        .chat-header {
            background: linear-gradient(135deg, #c41e3a 0%, #165b33 100%);
            color: white;
            padding: 16px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-body {
            height: 350px;
            overflow-y: auto;
            padding: 16px;
            background: #f8f9fa;
        }
        .chat-input-area {
            padding: 12px;
            border-top: 1px solid #e5e7eb;
            background: white;
        }
        .message {
            margin-bottom: 12px;
            max-width: 85%;
            padding: 10px 14px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
        }
        .message.bot {
            background: white;
            border: 1px solid #e5e7eb;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        .message.user {
            background: linear-gradient(135deg, #c41e3a 0%, #165b33 100%);
            color: white;
            align-self: flex-end;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        .light-option {
            cursor: pointer;
            transition: all 0.2s;
        }
        .light-option:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .light-option.selected {
            border: 3px solid #c41e3a;
            box-shadow: 0 0 20px rgba(196, 30, 58, 0.4);
        }
        #street-view-container {
            width: 100%;
            height: 500px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            background: #1f2937;
        }
        .light-overlay {
            position: absolute;
            pointer-events: none;
            z-index: 10;
        }
        .bubble-light {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin: 2px;
            box-shadow: 0 0 10px currentColor;
            animation: twinkle 2s infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .blue-bubble { background: #3b82f6; color: #3b82f6; }
        .white-bubble { background: #f9fafb; color: #f9fafb; }
        .red-bubble { background: #ef4444; color: #ef4444; }
        .green-bubble { background: #10b981; color: #10b981; }
        .gold-bubble { background: #fbbf24; color: #fbbf24; }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Navigation -->
    <nav class="bg-white shadow-lg fixed w-full z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-2">
                    <div class="text-2xl font-display font-bold">
                        <span class="text-holiday-red">Holiday</span><span class="text-holiday-green">Lights</span>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#designer" class="text-gray-700 hover:text-holiday-red font-medium">Designer</a>
                    <a href="#features" class="text-gray-700 hover:text-holiday-red font-medium">Features</a>
                    <a href="#pricing" class="text-gray-700 hover:text-holiday-red font-medium">Pricing</a>
                    <a href="#contact" class="btn-primary text-white px-6 py-3 rounded-lg font-semibold">Get Quote</a>
                </div>
                <button id="mobile-menu-btn" class="md:hidden text-gray-700">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
            <div class="px-4 py-4 space-y-3">
                <a href="#designer" class="block text-gray-700 py-2">Designer</a>
                <a href="#features" class="block text-gray-700 py-2">Features</a>
                <a href="#pricing" class="block text-gray-700 py-2">Pricing</a>
                <a href="#contact" class="block btn-primary text-white text-center py-3 rounded-lg font-semibold">Get Quote</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-bg text-white pt-32 pb-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center max-w-4xl mx-auto">
                <h1 class="text-4xl md:text-6xl font-display font-bold mb-6 leading-tight">
                    See Lights on YOUR Home<br>Before Installation
                </h1>
                <p class="text-xl text-white/90 mb-8">
                    Enter your address, explore your home in Street View, and design your perfect holiday display with our AI assistant.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#designer" class="btn-primary text-white px-8 py-4 rounded-xl text-lg font-semibold">
                        Start Designing
                    </a>
                    <a href="#contact" class="bg-white text-holiday-red px-8 py-4 rounded-xl text-lg font-semibold hover:bg-gray-100 transition">
                        Get Free Quote
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Designer Section -->
    <section id="designer" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="text-holiday-red font-semibold uppercase tracking-wider">Virtual Designer</span>
                <h2 class="text-3xl md:text-5xl font-display font-bold text-gray-900 mt-4">Design Your Holiday Display</h2>
            </div>

            <!-- Address Input -->
            <div class="max-w-2xl mx-auto mb-8">
                <div class="bg-gray-100 rounded-xl p-4">
                    <label class="block text-gray-700 font-semibold mb-2">Enter Your Address</label>
                    <div class="flex gap-2">
                        <input type="text" id="address-input" placeholder="123 Main St, Manhattan Beach, CA 90266" 
                            class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-holiday-red">
                        <button onclick="loadStreetView()" class="btn-primary text-white px-6 py-3 rounded-lg font-semibold">
                            View My Home
                        </button>
                    </div>
                </div>
            </div>

            <!-- Street View & Controls -->
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Map/Street View -->
                <div class="lg:col-span-2">
                    <div id="street-view-container">
                        <div id="map-message" class="absolute inset-0 flex items-center justify-center text-white text-center p-8">
                            <div>
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                <p class="text-lg">Enter your address above to see your home in Street View</p>
                            </div>
                        </div>
                        <iframe id="street-view-frame" class="w-full h-full border-0 hidden" allowfullscreen loading="lazy">
                        </iframe>
                        <div id="light-overlay" class="absolute inset-0 pointer-events-none"></div>
                    </div>
                    <div class="mt-4 flex gap-2">
                        <button onclick="toggleMapType('street')" class="px-4 py-2 bg-holiday-blue text-white rounded-lg text-sm">
                            Street View
                        </button>
                        <button onclick="toggleMapType('satellite')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm">
                            Satellite
                        </button>
                        <button onclick="toggleMapType('map')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm">
                            Map
                        </button>
                    </div>
                </div>

                <!-- Light Selection Panel -->
                <div class="bg-gray-50 rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Choose Your Lights</h3>
                    
                    <div class="space-y-4 mb-6">
                        <p class="text-sm text-gray-600 font-semibold">Bubble Lights</p>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="light-option selected bg-blue-50 rounded-xl p-4 text-center" onclick="selectLight('blue-white-bubble')">
                                <div class="flex justify-center gap-1 mb-2">
                                    <span class="bubble-light blue-bubble"></span>
                                    <span class="bubble-light white-bubble"></span>
                                    <span class="bubble-light blue-bubble"></span>
                                </div>
                                <p class="text-sm font-semibold text-gray-700">Blue & White</p>
                            </div>
                            <div class="light-option bg-red-50 rounded-xl p-4 text-center" onclick="selectLight('red-green-bubble')">
                                <div class="flex justify-center gap-1 mb-2">
                                    <span class="bubble-light red-bubble"></span>
                                    <span class="bubble-light green-bubble"></span>
                                    <span class="bubble-light red-bubble"></span>
                                </div>
                                <p class="text-sm font-semibold text-gray-700">Red & Green</p>
                            </div>
                            <div class="light-option bg-yellow-50 rounded-xl p-4 text-center" onclick="selectLight('gold-bubble')">
                                <div class="flex justify-center gap-1 mb-2">
                                    <span class="bubble-light gold-bubble"></span>
                                    <span class="bubble-light gold-bubble"></span>
                                    <span class="bubble-light gold-bubble"></span>
                                </div>
                                <p class="text-sm font-semibold text-gray-700">Warm Gold</p>
                            </div>
                            <div class="light-option bg-white rounded-xl p-4 text-center border" onclick="selectLight('white-bubble')">
                                <div class="flex justify-center gap-1 mb-2">
                                    <span class="bubble-light white-bubble"></span>
                                    <span class="bubble-light white-bubble"></span>
                                    <span class="bubble-light white-bubble"></span>
                                </div>
                                <p class="text-sm font-semibold text-gray-700">Pure White</p>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4 mb-6">
                        <p class="text-sm text-gray-600 font-semibold">Installation Style</p>
                        <div class="space-y-2">
                            <label class="flex items-center gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="radio" name="style" value="roofline" class="text-holiday-red" checked>
                                <span class="text-gray-700">Roofline Only</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="radio" name="style" value="full" class="text-holiday-red">
                                <span class="text-gray-700">Full House Outline</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="radio" name="style" value="windows" class="text-holiday-red">
                                <span class="text-gray-700">Windows & Doors</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 bg-white rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="radio" name="style" value="custom" class="text-holiday-red">
                                <span class="text-gray-700">Custom Design</span>
                            </label>
                        </div>
                    </div>

                    <div id="design-actions" class="hidden">
                        <button onclick="addLightsToHouse()" class="w-full btn-primary text-white py-4 rounded-xl font-semibold mb-3">
                            Preview Lights on My House
                        </button>
                        <button onclick="saveDesign()" class="w-full bg-white border-2 border-holiday-red text-holiday-red py-3 rounded-xl font-semibold hover:bg-red-50 transition">
                            Save Design
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section id="features" class="py-20 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-holiday-red font-semibold uppercase tracking-wider">How It Works</span>
                <h2 class="text-3xl md:text-5xl font-display font-bold text-gray-900 mt-4">3 Simple Steps</h2>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="w-20 h-20 bg-holiday-blue rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">1</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Enter Your Address</h3>
                    <p class="text-gray-600">Type in your address to instantly see your home using Google Street View.</p>
                </div>
                <div class="text-center">
                    <div class="w-20 h-20 bg-holiday-red rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">2</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Design Your Display</h3>
                    <p class="text-gray-600">Choose from multiple light colors and styles. Our AI helps you visualize the perfect look.</p>
                </div>
                <div class="text-center">
                    <div class="w-20 h-20 bg-holiday-green rounded-full flex items-center justify-center mx-auto mb-6 text-white text-3xl font-bold">3</div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Get Your Quote</h3>
                    <p class="text-gray-600">Save your design and receive a professional installation quote within 24 hours.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-holiday-red font-semibold uppercase tracking-wider">Pricing</span>
                <h2 class="text-3xl md:text-5xl font-display font-bold text-gray-900 mt-4">Choose Your Package</h2>
            </div>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="bg-gray-50 rounded-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Starter</h3>
                    <div class="text-4xl font-bold text-holiday-blue mb-4">$299</div>
                    <ul class="space-y-3 text-gray-600 mb-6">
                        <li>âœ“ Roofline lights (front only)</li>
                        <li>âœ“ Up to 100 linear feet</li>
                        <li>âœ“ Professional installation</li>
                        <li>âœ“ Removal included</li>
                    </ul>
                    <button class="w-full bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">Get Quote</button>
                </div>
                <div class="bg-gradient-to-br from-holiday-red to-holiday-green rounded-2xl p-8 text-white transform scale-105 shadow-xl">
                    <div class="bg-white/20 text-center py-1 rounded-full text-sm font-bold mb-4">Most Popular</div>
                    <h3 class="text-xl font-bold mb-2">Premium</h3>
                    <div class="text-4xl font-bold mb-4">$599</div>
                    <ul class="space-y-3 mb-6">
                        <li>âœ“ Full roofline (all sides)</li>
                        <li>âœ“ Windows & door frames</li>
                        <li>âœ“ Up to 300 linear feet</li>
                        <li>âœ“ Professional installation</li>
                        <li>âœ“ Removal included</li>
                    </ul>
                    <button class="w-full bg-white text-holiday-red py-3 rounded-lg font-semibold hover:bg-gray-100 transition">Get Quote</button>
                </div>
                <div class="bg-gray-50 rounded-2xl p-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Deluxe</h3>
                    <div class="text-4xl font-bold text-holiday-blue mb-4">$999</div>
                    <ul class="space-y-3 text-gray-600 mb-6">
                        <li>âœ“ Full house outline</li>
                        <li>âœ“ Trees & bushes (up to 5)</li>
                        <li>âœ“ Driveway entrance</li>
                        <li>âœ“ Up to 600 linear feet</li>
                        <li>âœ“ Professional installation</li>
                        <li>âœ“ Removal included</li>
                    </ul>
                    <button class="w-full bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">Get Quote</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-holiday-blue text-white">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h2 class="text-3xl md:text-5xl font-display font-bold mb-6">Ready to Light Up Your Holidays?</h2>
            <p class="text-xl text-blue-100 mb-10">Get a free quote for your custom holiday lighting design.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="tel:3107559439" class="btn-primary text-white px-10 py-5 rounded-xl text-xl font-bold">
                    Call (310) 755-9439
                </a>
            </div>
            <div class="mt-12 flex flex-wrap justify-center gap-8 text-blue-200">
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-holiday-gold" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    Free Design Consultation
                </div>
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-holiday-gold" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    Professional Installation
                </div>
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-holiday-gold" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                    Removal Included
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="text-2xl font-display font-bold mb-4">
                        <span class="text-holiday-red">Holiday</span><span class="text-holiday-green">Lights</span>
                    </div>
                    <p class="text-gray-400">Professional Christmas light installation with virtual design preview.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Services</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Virtual Designer</li>
                        <li>Residential Installation</li>
                        <li>Commercial Installation</li>
                        <li>Light Removal</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Contact</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>(310) 755-9439</li>
                        <li>South Bay Area</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Hours</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Mon-Sat: 8AM-6PM</li>
                        <li>Sunday: By Appointment</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-12 pt-8 text-center text-gray-500">
                <p>&copy; 2026 Holiday Lights. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- AI Chat Widget -->
    <div id="chat-widget" class="chat-widget minimized">
        <div class="chat-header" onclick="toggleChat()">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                </div>
                <div>
                    <div class="font-bold">AI Design Assistant</div>
                    <div class="text-xs text-white/80">Ask me about light designs!</div>
                </div>
            </div>
            <button class="text-white/80 hover:text-white">
                <svg id="chat-toggle-icon" class="w-6 h-6 transform rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
        </div>
        <div id="chat-body" class="chat-body flex flex-col">
            <div id="chat-messages" class="flex-1 space-y-3">
                <div class="message bot">
                    ðŸ‘‹ Hi! I'm your AI Holiday Design Assistant. I can help you:
                    <br><br>
                    â€¢ Choose the perfect light colors for your home<br>
                    â€¢ Suggest the best installation style<br>
                    â€¢ Answer questions about our packages<br>
                    â€¢ Help you visualize your design
                    <br><br>
                    Enter your address above to get started, or ask me anything!
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <div class="flex gap-2">
                <input type="text" id="chat-input" placeholder="Ask about lights, colors, pricing..." 
                    class="flex-1 px-4 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-holiday-red">
                <button onclick="sendMessage()" class="bg-holiday-red text-white px-4 py-2 rounded-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let selectedLight = 'blue-white-bubble';
        let currentAddress = '';
        let mapView = 'street';

        function toggleChat() {
            const widget = document.getElementById('chat-widget');
            const icon = document.getElementById('chat-toggle-icon');
            widget.classList.toggle('minimized');
            icon.classList.toggle('rotate-180');
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';

            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                addMessage(response, 'bot');
            }, 500);
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chat-messages');
            const message = document.createElement('div');
            message.className = `message ${sender}`;
            message.innerHTML = text;
            container.appendChild(message);
            container.scrollTop = container.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const msg = userMessage.toLowerCase();
            
            if (msg.includes('price') || msg.includes('cost') || msg.includes('how much')) {
                return "Our packages start at $299 for the Starter package (roofline only). The Premium package at $599 is our most popular and includes full roofline plus windows and doors. Would you like a custom quote for your home?";
            }
            if (msg.includes('blue') && msg.includes('white')) {
                return "Blue and white lights are a classic, elegant choice! They create a beautiful winter wonderland look that works great for any home style. âœ¨ I've selected the Blue & White Bubble Lights for you. Try entering your address to see how they'd look on your home!";
            }
            if (msg.includes('color') || msg.includes('light')) {
                return "We offer several beautiful light options: Blue & White (elegant), Red & Green (classic Christmas), Warm Gold (cozy), and Pure White (modern). Which style do you prefer?";
            }
            if (msg.includes('install') || msg.includes('how does it work')) {
                return "Installation is easy! Our professional team handles everything - we arrive with your custom design, install the lights perfectly, and return in January to remove them. All packages include both installation AND removal.";
            }
            if (msg.includes('street view') || msg.includes('map') || msg.includes('see my house')) {
                return "Just enter your address in the box above and click 'View My Home' to launch Google Street View. Then you can select lights and styles to preview on your actual home!";
            }
            return "That's a great question! I'm here to help you design the perfect holiday lighting display. Would you like help choosing colors, styles, or getting a quote?";
        }

        function loadStreetView() {
            const address = document.getElementById('address-input').value;
            if (!address) {
                alert('Please enter your address');
                return;
            }
            
            currentAddress = address;
            const encodedAddress = encodeURIComponent(address);
            const streetViewUrl = `https://www.google.com/maps/embed?pb=!4v1699999999999!6m8!1m7!1sCAoSLEFGMVFpcE9B!2m2!1d33.8916!2d-118.3992!3f180!4f0!5f0.7820865974627469!3m6!1sAF1QipO...!7i16384!8i8192`;
            
            // For demo purposes, we'll use a generic embed URL
            // In production, you'd use the Google Maps API with proper API key
            const mapUrl = `https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d100000!2d-118.4!3d33.9!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzPCsDUzJzMwLjAiTiAxMTjCsDIzJzQ4LjAiVw!5e0!3m2!1sen!2sus!4v1699999999999!5m2!1sen!2sus&q=${encodedAddress}`;
            
            const frame = document.getElementById('street-view-frame');
            const message = document.getElementById('map-message');
            const actions = document.getElementById('design-actions');
            
            // Demo: Show placeholder since we don't have a real API key
            frame.src = `https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d13123.45!2d-118.3992!3d33.8916!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1699999999999`;
            frame.classList.remove('hidden');
            message.classList.add('hidden');
            actions.classList.remove('hidden');

            // Add welcome message from AI
            addMessage(`Great! I can see your location at "${address}". Try selecting different light colors on the right and click "Preview Lights" to see how they'd look! ðŸ’¡`, 'bot');
        }

        function toggleMapType(type) {
            mapView = type;
            const buttons = document.querySelectorAll('[onclick^="toggleMapType"]');
            buttons.forEach(btn => {
                btn.classList.remove('bg-holiday-blue', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-holiday-blue', 'text-white');
        }

        function selectLight(type) {
            selectedLight = type;
            document.querySelectorAll('.light-option').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            const colorMap = {
                'blue-white-bubble': 'Blue & White',
                'red-green-bubble': 'Red & Green',
                'gold-bubble': 'Warm Gold',
                'white-bubble': 'Pure White'
            };
            
            addMessage(`Great choice! I've selected the ${colorMap[type]} lights. These will look beautiful on your home! ðŸŽ„`, 'bot');
        }

        function addLightsToHouse() {
            if (!currentAddress) {
                alert('Please enter your address first');
                return;
            }
            
            const overlay = document.getElementById('light-overlay');
            const style = document.querySelector('input[name="style"]:checked').value;
            
            // Create a demo light display
            let lightHTML = '';
            const colors = selectedLight.includes('blue-white') ? ['blue-bubble', 'white-bubble'] :
                          selectedLight.includes('red-green') ? ['red-bubble', 'green-bubble'] :
                          selectedLight.includes('gold') ? ['gold-bubble'] :
                          ['white-bubble'];
            
            // Add lights around the edges
            for (let i = 0; i < 30; i++) {
                const color = colors[i % colors.length];
                const top = Math.random() * 80 + 10;
                const left = (i / 30) * 90 + 5;
                lightHTML += `<span class="bubble-light ${color}" style="position:absolute;top:${top}%;left:${left}%"></span>`;
            }
            
            overlay.innerHTML = lightHTML;
            
            // AI feedback
            const styleNames = {
                'roofline': 'roofline',
                'full': 'full house outline',
                'windows': 'windows and doors',
                'custom': 'custom design'
            };
            
            addMessage(`âœ¨ Beautiful! I've added ${colors.map(c => c.replace('-bubble', '')).join(' and ')} lights in a ${styleNames[style]} pattern to show you the preview! This gives you an idea of how it would look. Want me to save this design and get you a quote?`, 'bot');
        }

        function saveDesign() {
            if (!currentAddress) {
                alert('Please enter your address and preview your design first');
                return;
            }
            
            const lightColors = {
                'blue-white-bubble': 'Blue & White Bubble Lights',
                'red-green-bubble': 'Red & Green Bubble Lights',
                'gold-bubble': 'Warm Gold Bubble Lights',
                'white-bubble': 'Pure White Bubble Lights'
            };
            
            const style = document.querySelector('input[name="style"]:checked').value;
            
            alert(`Design Saved! ðŸŽ„\n\n` +
                  `Address: ${currentAddress}\n` +
                  `Light Style: ${lightColors[selectedLight]}\n` +
                  `Installation: ${style.charAt(0).toUpperCase() + style.slice(1)}\n\n` +
                  `A quote will be sent to you within 24 hours!`);
            
            addMessage("Perfect! I've saved your design. Our team will review it and send you a detailed quote within 24 hours. You can also call us at (310) 755-9439 for immediate assistance! ðŸŽ", 'bot');
        }

        // Enter key support for chat
        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });

        // Mobile menu
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Auto-open chat after 5 seconds
        setTimeout(() => {
            document.getElementById('chat-widget').classList.remove('minimized');
            document.getElementById('chat-toggle-icon').classList.remove('rotate-180');
        }, 5000);
    </script>
</body>
</html>